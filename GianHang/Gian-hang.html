<html lang="vi">
<head>
    <title>Danh muÃ£c saÃân ph√¢Ãâm</title>
    <link rel="stylesheet" href="Gian-Hang-sty.css">
</head>
<body>
    <header>
        <nav>
            <img src="Img/Logo.png">
            <div class="menu">
                <a href="#">Trang ch·ªß</a>
                <a href="#">S·∫£n ph·∫©m</a>
                <a href="#">V·ªÅ ch√∫ng t√¥i</a>
                <a href="#">Li√™n h·ªá</a>
            </div>
            <div class="menu-DT"> <h1>‚ò∞ Menu</h1> <!-- menu cho cac tb nho hon -->
                <ul>
                    <li><a href="#">Trang ch·ªß</a></li>
                    <li><a href="#">S·∫£n ph·∫©m</a></li>
                    <li><a href="#">V·ªÅ ch√∫ng t√¥i</a></li>
                    <li><a href="#">Li√™n h·ªá</a></li>
                </ul>
            </div>
            <button class="mo-gio" id="mo-gio">
                GioÃâ HaÃÄng üõí
            </button>
        </nav>
    </header>
    
    <div class="ND">
        <section class="banner">
            <div class="slideshow-container">
                <div class="slide">
                    <img src="Img/∆Øu-dai-mua-he.jpg" alt="Khuy·∫øn m√£i m√πa h√®" class="banner-image">
                    <div class="slide-text">
                        <h2>Khuy·∫øn m√£i m√πa h√®</h2>
                        <p>Gi·∫£m gi√° ƒë·∫øn 50% cho t·∫•t c·∫£ s·∫£n ph·∫©m</p>
                        <button class="nut-slide">Xem ngay</button>
                    </div>
                </div>
                
                <div class="slide">
                    <img src="Img/San-pham-moi.jfif" alt="S·∫£n ph·∫©m m·ªõi" class="banner-image">
                    <div class="slide-text">
                        <h2>S·∫£n ph·∫©m m·ªõi 2025</h2>
                        <p>Kh√°m ph√° nh·ªØng c√¥ng ngh·ªá m·ªõi nh·∫•t</p>
                        <button class="nut-slide">Kh√°m ph√°</button>
                    </div>
                </div>
                
                <div class="slide">
                    <img src="Img/Tri-an-khach-hang.png" alt="∆Øu ƒë√£i th√†nh vi√™n" class="banner-image">
                    <div class="slide-text">
                        <h2>∆Øu ƒë√£i th√†nh vi√™n</h2>
                        <p>ƒêƒÉng k√Ω th√†nh vi√™n ƒë·ªÉ nh·∫≠n th√™m ∆∞u ƒë√£i</p>
                        <button class="nut-slide">ƒêƒÉng k√Ω</button>
                    </div>
                </div>
                
                <!-- nut dieu huong -->
                <button class="prev" onclick="plusSlides(-1)">&#10094;</button>
                <button class="next" onclick="plusSlides(1)">&#10095;</button>
            </div>
            
            <!-- cham tron -->
            <div class="dots-container">
                <span class="dot" onclick="currentSlide(1)"></span>
                <span class="dot" onclick="currentSlide(2)"></span>
                <span class="dot" onclick="currentSlide(3)"></span>
            </div>
        </section>
        
        <section class="nut-loc" id="categoryFilter">
            <button class="loc active" data-category="all">T·∫•t c·∫£</button>
            <button class="loc" data-category="PC Build SƒÉÃÉn">PC Build SƒÉÃÉn</button>
            <button class="loc" data-category="Laptop">Laptop</button>
            <button class="loc" data-category="ph·ª• ki·ªán">Ph·ª• ki·ªán</button>
            <button class="loc" data-category="MaÃÄn HiÃÄnh">MaÃÄn HiÃÄnh</button>
        </section>
        
        <section class="area_sp" id="area_sp">
            <!-- san pham trung bay hien o day -->
        </section>
    </div>

    <!-- Gio hang -->
    <div class="gio-hang" id="giohang">
        <div class="nd-gio">
            <div class="gio-header">
                <h2>Gi·ªè h√†ng</h2>
                <button class="nut-dong" id="dong-gio">&times;</button>
            </div>
            <div class="sp-gio" id="sp_gio">
                <!-- San pham them vao gio hang hien o day -->
            </div>
            <div class="tong" id="tong">T·ªïng: 0‚Ç´</div>
            <button class="ThanhToan">Thanh to√°n</button>
        </div>
    </div>

    <!-- Thong bao them vao gio hang -->
    <div id="notification" class="notification">
        ƒê√£ th√™m "<span id="notificationProduct"></span>" v√†o gi·ªè h√†ng!
    </div>
    
    <footer>
            <div class="card-foot">
                <h3>V·ªÅ ShopOnline</h3>
                <ul>
                    <li><a href="#">Gi·ªõi thi·ªáu</a></li>
                    <li><a href="#">Tuy·ªÉn d·ª•ng</a></li>
                    <li><a href="#">ƒêi·ªÅu kho·∫£n</a></li>
                    <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                </ul>
            </div>
            <div class="card-foot">
                <h3>H·ªó tr·ª£ kh√°ch h√†ng</h3>
                <ul>
                    <li><a href="#">Trung t√¢m tr·ª£ gi√∫p</a></li>
                    <li><a href="#">H∆∞·ªõng d·∫´n mua h√†ng</a></li>
                    <li><a href="#">Ph∆∞∆°ng th·ª©c v·∫≠n chuy·ªÉn</a></li>
                    <li><a href="#">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
                </ul>
            </div>
            <div class="card-foot">
                <h3>Thanh to√°n</h3>
                <ul>
                    <li><a href="#">Th·∫ª t√≠n d·ª•ng</a></li>
                    <li><a href="#">Chuy·ªÉn kho·∫£n</a></li>
                    <li><a href="#">Thanh to√°n khi nh·∫≠n h√†ng</a></li>
                    <li><a href="#">V√≠ ƒëi·ªán t·ª≠</a></li>
                </ul>
            </div>
            <div class="card-foot">
                <h3>K·∫øt n·ªëi v·ªõi ch√∫ng t√¥i</h3>
                <ul>
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">YouTube</a></li>
                </ul>
            </div>
    </footer>
    

    <script src="data-sp.js"></script>
    <script>
        let gio = [];  

    // js phan slide
        let slideIndex = 1;
        let slideTimer;
        // hien thi slide
        function showSlides(n) {
            let i;
            let slides = document.getElementsByClassName("slide");
            let dots = document.getElementsByClassName("dot");
    
            // Quay lai dau khi het slide
            if (n > slides.length) {slideIndex = 1}
            if (n < 1) {slideIndex = slides.length}
    
            // an tat ca slide
            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
    
            // X√≥a tr·∫°ng th√°i active c·ªßa t·∫•t c·∫£ c√°c dots
            for (i = 0; i < dots.length; i++) {
                dots[i].className = dots[i].className.replace(" active", "");
            }
    
            // hien thi slide
            slides[slideIndex-1].style.display = "block";
            dots[slideIndex-1].className += " active";
    
            // chuyen slide tu dong
            clearTimeout(slideTimer);
            slideTimer = setTimeout(function() {
                slideIndex++;
                showSlides(slideIndex);
            }, 2500);
        }

        // dieu khien chuyen slide
        function plusSlides(n) {
            showSlides(slideIndex += n);
        }
        // chuyen slide tu dong
        function currentSlide(n) {
            showSlides(slideIndex = n);
        }
        // khoi tao slide khi trang da tai xong
        document.addEventListener('DOMContentLoaded', function() {
            if (document.readyState === 'complete' || document.readyState === 'interactive') {
                showSlides(slideIndex);
            }
        });
// HIEN THI SAN PHAM
        function re_VND(price) { // chuan gia hoa gia tien thanh dang VND
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".") + "‚Ç´";
        }
        
        // hien san pham
        function hien_san_pham(sp_in) {
            var area_sp = document.getElementById('area_sp');
            area_sp.innerHTML = '';
            
            for (let i = 0; i < sp_in.length; i++) {
                var sp = sp_in[i];
                var the_sp = document.createElement('div');
                the_sp.className = 'sp-card';

                the_sp.innerHTML = `
                    <a href="chi-tiet-sp.html?id=${sp.id}" target="_blank">
                        <img src="${sp.image}" alt="${sp.ten}" class="sp-image">
                    <a>
                    <div class="sp-info">
                        <a href="chi-tiet-sp.html?id=${sp.id}" target="_blank">
                            <div class="sp-ten">${sp.ten}</div>
                        </a>
                        <div class="sp-gia">${re_VND(sp.gia)}</div>
                        <div class="sp-mota">${sp.mota}</div>
                        <button class="nut-them" data-id="${sp.id}">Th√™m v√†o gi·ªè</button>
                    </div>`;
        
                area_sp.appendChild(the_sp); 
            }
            
                    // click nut them vao gio hang
            var nut_them = document.querySelectorAll('.nut-them');
            for (let i = 0; i < nut_them.length; i++) {
                nut_them[i].addEventListener('click', them);
            }
        }
        // Loc
        function loc_sp() {
            var loc = document.querySelectorAll('.loc');

            for (let i = 0; i < loc.length; i++) {
                loc[i].addEventListener('click', function() {
                for (let j = 0; j < loc.length; j++) {
                    loc[j].classList.remove('active');
                }

                loc[i].classList.add('active');
            
                var loai = loc[i].getAttribute('data-category');
            
                // loc theo loai
                if (loai === 'all') {
                    hien_san_pham(products);
                } else {
                    var filteredProducts = [];
                    for (let k = 0; k < products.length; k++) {
                        if (products[k].loai === loai) {
                            filteredProducts.push(products[k]);
                        }
                    }
                hien_san_pham(filteredProducts);
                }
                });
            }
        }
		
        // ham hien thi thong bao them vao gio hang
		function showNotification(productName) {
            var notification = document.getElementById('notification');
            var notificationProduct = document.getElementById('notificationProduct');
            
            notificationProduct.textContent = productName;
            notification.classList.add('show');
            
            // an sau 3s
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Them vao gio
        function them (event) {
            var productId = parseInt(event.target.getAttribute('data-id')); //
            var product = products.find(p => p.id === productId);
            
            // kiem tra hang dc them da co trong gio chua
            var existingItem = gio.find(item => item.product.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                gio.push({
                    product: product,
                    quantity: 1
                });
            }

            // thong bao them vao gio hang
            showNotification(product.ten); 
        }
        
        // hien thi gio
        function hien_thi_gio() {
            var sp_gio = document.getElementById('sp_gio');
            var gioTotal = document.getElementById('tong');
            
            sp_gio.innerHTML = '';
            
            if (gio.length === 0) {
                sp_gio.innerHTML = '<p>Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng.</p>';
                gioTotal.textContent = 'T·ªïng: 0‚Ç´';
                return;
            }
            
            let total = 0;
            
            for (let index = 0; index < gio.length; index++) {
                let item = gio[index];

                var gioItem = document.createElement('div');
                gioItem.className = 'the-sp';

                var itemTotal = item.product.gia * item.quantity;
                total += itemTotal;

                gioItem.innerHTML = `
                    <img src="${item.product.image}" alt="${item.product.name}" class="the-sp-image">
                    <div class="the-sp-details">
                        <div class="the-sp-ten">${item.product.ten}</div>
                        <div class="the-sp-gia">${re_VND(item.product.gia)}</div>
                        <div class="the-sp-soluong">
                            <button class="nut-sl giam" data-index="${index}">-</button>
                            <input type="text" value="${item.quantity}" class="soluong-input" readonly>
                            <button class="nut-sl tang" data-index="${index}">+</button>
                        </div>
                    </div>
                    <button class="xoa" data-index="${index}">√ó</button>
                `;

                sp_gio.appendChild(gioItem);
            }

            gioTotal.textContent = `T·ªïng: ${re_VND(total)}`;
            
            // cac nut gio hang
            let buttontang = document.querySelectorAll('.tang');
            for (let i = 0; i < buttontang.length; i++) {
                buttontang[i].addEventListener('click', tang_so_luong);
            }

            let buttongiam = document.querySelectorAll('.giam');
            for (let i = 0; i < buttongiam.length; i++) {
                buttongiam[i].addEventListener("click", giam_so_luong);
            }

            let buttonxoa = document.querySelectorAll('.xoa');
            for (let i = 0; i < buttonxoa.length; i++) {
                buttonxoa[i].addEventListener("click", xoa);
            }

        }
        
        // giam so luong
        function giam_so_luong(event) {
            var index = parseInt(event.target.getAttribute('data-index'));  // lay vi tri cua san pham
            
            if (gio[index].quantity > 1) { // neu sl nhieu hon 1 thi giam
                gio[index].quantity -= 1;
            } else {                        // neu so luong = 1 thi xoa
                gio.splice(index, 1);
            }
            
            hien_thi_gio(); // cap nhat lai gio khi tang
        }
        
        // tang so luong
        function tang_so_luong(event) {
            var index = parseInt(event.target.getAttribute('data-index'));  // lay vi tri cua san pham
            gio[index].quantity += 1;
            
            hien_thi_gio(); // cap nhat lai gio khi giam
        }
        
        // xoa san pham khoi gio hang
        function xoa(event) {
            var index = parseInt(event.target.getAttribute('data-index'));  // lay vi tri cua san pham
            gio.splice(index, 1);
            
            hien_thi_gio(); // cap nhat lai gio khi xoa
        }
        
        // tat bat gio hang
        function tat_bat_gio() {
            var giohang = document.getElementById('giohang');
            if (giohang.style.display === 'flex') {
                giohang.style.display = 'none';
            } else {
                hien_thi_gio();
                giohang.style.display = 'flex';
            }
        }
        
        // chay js khi tai trang web
        document.addEventListener('DOMContentLoaded', function () {
            hien_san_pham(products);             // khoi tao sp
            loc_sp();                   // khoi tao loc
            document.getElementById('mo-gio').addEventListener('click', tat_bat_gio); // khoi tao nut mo gio hang
            document.getElementById('dong-gio').addEventListener('click', tat_bat_gio); // khoi tao nut dong gio hang
        });
    </script>
</body>
</html>