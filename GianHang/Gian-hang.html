<html>
<head>
    <title>Danh muÃ£c saÃân ph√¢Ãâm</title>
    <link rel="stylesheet" href="Gian-Hang-sty.css">
</head>
<body>
    <header>
        <nav>
            <img src="Img/Logo.png">
            <div class="menu">
                <a href="#">Trang ch·ªß</a>
                <a href="#">S·∫£n ph·∫©m</a>
                <a href="#">V·ªÅ ch√∫ng t√¥i</a>
                <a href="#">Li√™n h·ªá</a>
            </div>
            <div class="menu-DT"> <h1>‚ò∞ Menu</h1> <!-- menu cho cac tb nho hon -->
                <ul>
                    <li><a href="#">Trang ch·ªß</a></li>
                    <li><a href="#">S·∫£n ph·∫©m</a></li>
                    <li><a href="#">V·ªÅ ch√∫ng t√¥i</a></li>
                    <li><a href="#">Li√™n h·ªá</a></li>
                </ul>
            </div>
            <button class="mo-gio" id="mo-gio">
                GioÃâ HaÃÄng üõí
            </button>
        </nav>
    </header>
    
    <div class="ND">
        <section class="banner">
            <div class="slideshow-container">
                <div class="slide">
                    <img src="Img/∆Øu-dai-mua-he.jpg" alt="Khuy·∫øn m√£i m√πa h√®" class="banner-image">
                    <div class="slide-text">
                        <h2>Khuy·∫øn m√£i m√πa h√®</h2>
                        <p>Gi·∫£m gi√° ƒë·∫øn 50% cho t·∫•t c·∫£ s·∫£n ph·∫©m</p>
                        <button class="nut-slide">Xem ngay</button>
                    </div>
                </div>
                
                <div class="slide">
                    <img src="Img/San-pham-moi.jfif" alt="S·∫£n ph·∫©m m·ªõi" class="banner-image">
                    <div class="slide-text">
                        <h2>S·∫£n ph·∫©m m·ªõi 2025</h2>
                        <p>Kh√°m ph√° nh·ªØng c√¥ng ngh·ªá m·ªõi nh·∫•t</p>
                        <button class="nut-slide">Kh√°m ph√°</button>
                    </div>
                </div>
                
                <div class="slide">
                    <img src="Img/Tri-an-khach-hang.png" alt="∆Øu ƒë√£i th√†nh vi√™n" class="banner-image">
                    <div class="slide-text">
                        <h2>∆Øu ƒë√£i th√†nh vi√™n</h2>
                        <p>ƒêƒÉng k√Ω th√†nh vi√™n ƒë·ªÉ nh·∫≠n th√™m ∆∞u ƒë√£i</p>
                        <button class="nut-slide">ƒêƒÉng k√Ω</button>
                    </div>
                </div>
                
                <!-- nut dieu huong -->
                <button class="prev" onclick="plusSlides(-1)">&#10094;</button>
                <button class="next" onclick="plusSlides(1)">&#10095;</button>
            </div>
            
            <!-- cham tron -->
            <div class="dots-container">
                <span class="dot" onclick="currentSlide(1)"></span>
                <span class="dot" onclick="currentSlide(2)"></span>
                <span class="dot" onclick="currentSlide(3)"></span>
            </div>
        </section>
        
        <section class="nut-loc" id="loaiFilter">
            <button class="loc active" data-loai="all">T·∫•t c·∫£</button>
            <button class="loc" data-loai="PC">PC</button>
            <button class="loc" data-loai="Laptop">Laptop</button>
            <button class="loc" data-loai="Ph·ª• Ki·ªán">Ph·ª• Ki·ªán</button>
            <button class="loc" data-loai="MaÃÄn HiÃÄnh">MaÃÄn HiÃÄnh</button>
        </section>
        
        <section class="area_sp" id="area_sp">
            <!-- san pham trung bay hien o day -->
        </section>
    </div>

    <!-- Gio hang -->
    <div class="gio-hang" id="giohang">
        <div class="nd-gio">
            <div class="gio-header">
                <h2>Gi·ªè h√†ng</h2>
                <button class="nut-dong" id="dong-gio">&times;</button>
            </div>
            <div class="sp-gio" id="sp_gio">
                <!-- San pham them vao gio hang hien o day -->
            </div>
            <div class="tong" id="tong">T·ªïng: 0‚Ç´</div>
            <button class="ThanhToan">Thanh to√°n</button>
        </div>
    </div>

    <!-- Thong bao them vao gio hang -->
    <div id="notification" class="notification">
        ƒê√£ th√™m "<span id="notificationProduct"></span>" v√†o gi·ªè h√†ng!
    </div>
    
    <footer>
            <div class="card-foot">
                <h3>V·ªÅ ShopOnline</h3>
                <ul>
                    <li><a href="#">Gi·ªõi thi·ªáu</a></li>
                    <li><a href="#">Tuy·ªÉn d·ª•ng</a></li>
                    <li><a href="#">ƒêi·ªÅu kho·∫£n</a></li>
                    <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                </ul>
            </div>
            <div class="card-foot">
                <h3>H·ªó tr·ª£ kh√°ch h√†ng</h3>
                <ul>
                    <li><a href="#">Trung t√¢m tr·ª£ gi√∫p</a></li>
                    <li><a href="#">H∆∞·ªõng d·∫´n mua h√†ng</a></li>
                    <li><a href="#">Ph∆∞∆°ng th·ª©c v·∫≠n chuy·ªÉn</a></li>
                    <li><a href="#">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
                </ul>
            </div>
            <div class="card-foot">
                <h3>Thanh to√°n</h3>
                <ul>
                    <li><a href="#">Th·∫ª t√≠n d·ª•ng</a></li>
                    <li><a href="#">Chuy·ªÉn kho·∫£n</a></li>
                    <li><a href="#">Thanh to√°n khi nh·∫≠n h√†ng</a></li>
                    <li><a href="#">V√≠ ƒëi·ªán t·ª≠</a></li>
                </ul>
            </div>
            <div class="card-foot">
                <h3>K·∫øt n·ªëi v·ªõi ch√∫ng t√¥i</h3>
                <ul>
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">YouTube</a></li>
                </ul>
            </div>
    </footer>
    
    <!-- hien thi chi tiet san pham -->
    <div id="CT-sp" class="CT-sp">
        <div class="CT-noidung">
          <span onclick="dongChiTiet()">√ó</span>
          <div id="CT-noidung-sp"></div>
        </div>
      </div>

    <script src="data-sp.js"></script>
    <script>
    // js phan slide
        let slideIndex = 1;
        let slideTimer;

        // hien thi slide
        function showSlides(n) {
            let i;
            let slides = document.getElementsByClassName("slide");
            let dots = document.getElementsByClassName("dot");

            // Quay lai dau khi het slide
            if (n > slides.length) {slideIndex = 1}
            if (n < 1) {slideIndex = slides.length}

            // an tat ca slide
            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }

            // X√≥a tr·∫°ng th√°i active c·ªßa t·∫•t c·∫£ c√°c dots
            for (i = 0; i < dots.length; i++) {
                dots[i].className = dots[i].className.replace(" active", "");
            }

            // hien thi slide
            slides[slideIndex-1].style.display = "block";
            dots[slideIndex-1].className += " active";

            // chuyen slide tu dong
            clearTimeout(slideTimer);
            slideTimer = setTimeout(function() {
                slideIndex++;
                showSlides(slideIndex);
            }, 2500);
        }

        // dieu khien chuyen slide
        function plusSlides(n) {
            showSlides(slideIndex += n);
        }
        // chuyen slide tu dong
        function currentSlide(n) {
            showSlides(slideIndex = n);
        }

        // HIEN THI SAN PHAM
        function re_VND(price) { // chuan gia hoa gia tien thanh dang VND
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".") + "‚Ç´";
        }

        let gio = [];  // Khoi tao gio hang
        
        // hien san pham
        function hien_san_pham(sp_in) {
            var area_sp = document.getElementById('area_sp');
            area_sp.innerHTML = '';
            
            for (let i = 0; i < sp_in.length; i++) {
                var sp = sp_in[i];
                var the_sp = document.createElement('div');
                the_sp.className = 'sp-card';

                the_sp.innerHTML = `
                    <a onclick="CT_sp(${i})">
                        <img src="${sp.image}" alt="${sp.ten}" class="sp-image">
                    </a>
                    <div class="sp-info">
                        <a onclick="CT_sp(${i})">
                            <div class="sp-ten">${sp.ten}</div>
                        </a>
                        <div class="sp-gia">${re_VND(sp.gia)}</div>
                        <div class="sp-mota">${sp.mota}</div>
                        <button class="nut-them" data-id="${sp.id}">Th√™m v√†o gi·ªè</button>
                    </div>`;

                var buttons = the_sp.querySelector('.nut-them');
                buttons.addEventListener('click', them);

                area_sp.appendChild(the_sp); 
            }
        }

        // Them vao gio
        function them(event) {
            let i = parseInt(event.target.dataset.id);
            var product = Data.find(p => p.id === i);
            
            // kiem tra hang dc them da co trong gio chua
            var existingItem = gio.find(item => item.product.id === i);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                gio.push({
                    product: product,
                    quantity: 1
                });
            }
            
            // thong bao them vao gio hang
            Thongbaothem(product.ten);
            hien_thi_gio(); // C·∫≠p nh·∫≠t gi·ªè h√†ng ngay l·∫≠p t·ª©c n·∫øu ƒëang m·ªü
        }

        // chi tiet san pham
        function CT_sp(index) {
            var sp = Data[index];

            var content = `
                <img src="${sp.image}" alt="${sp.ten}">
                <h2>${sp.ten}</h2>
                <p><strong>Gi√°:</strong> ${re_VND(sp.gia)}</p>
                <p><strong>M√¥ t·∫£ chi ti·∫øt:</strong> ${sp.mota_chitiet}</p>
                <button class="nut-them-o-ct" data-id="${sp.id}">Th√™m v√†o gi·ªè</button>
            `;

            document.getElementById('CT-noidung-sp').innerHTML = content;
            document.getElementById('CT-sp').style.display = 'flex';

            var buttons = document.querySelector('.nut-them-o-ct');
            if (buttons) {
                buttons.addEventListener('click', them);
            }
        }
        function dongChiTiet() {
            document.getElementById('CT-sp').style.display = 'none';
        }

        // Loc
        function loc_sp() {
            var loc = document.querySelectorAll('.loc');

            for (let i = 0; i < loc.length; i++) {
                loc[i].addEventListener('click', function() {
                    for (let j = 0; j < loc.length; j++) {
                        loc[j].classList.remove('active');
                    }

                    loc[i].classList.add('active');
                
                    var loai = loc[i].getAttribute('data-loai');
                
                    // loc theo loai
                    if (loai === 'all') {
                        hien_san_pham(Data);
                    } else {
                        var filteredData = Data.filter(product => product.loai === loai);
                        hien_san_pham(filteredData);
                    }
                });
            }
        }

        // ham hien thi thong bao them vao gio hang
        function Thongbaothem(productName) {
            var notification = document.getElementById('notification');
            var notificationProduct = document.getElementById('notificationProduct');
            
            notificationProduct.textContent = productName;
            notification.classList.add('show');
            
            // an sau 3s
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

    // hien thi gio

        function hien_thi_gio() {
            var sp_gio = document.getElementById('sp_gio');
            var gioTotal = document.getElementById('tong');
            
            sp_gio.innerHTML = '';
            
            if (gio.length === 0) {
                sp_gio.innerHTML = '<p>Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng.</p>';
                gioTotal.textContent = 'T·ªïng: 0‚Ç´';
                return;
            }
            
            let total = 0;
            
            for (let i = 0; i < gio.length; i++) {
                let item = gio[i];

                var gioItem = document.createElement('div');
                gioItem.className = 'the-sp';

                var itemTotal = item.product.gia * item.quantity;
                total += itemTotal;

                gioItem.innerHTML = `
                    <img src="${item.product.image}" alt="${item.product.ten}" class="the-sp-image">
                    <div class="the-sp-details">
                        <div class="the-sp-ten">${item.product.ten}</div>
                        <div class="the-sp-gia">${re_VND(item.product.gia)}</div>
                        <div class="the-sp-soluong">
                            <button class="nut-sl giam" data-id="${i}">-</button>
                            <input type="text" value="${item.quantity}" class="soluong-input" readonly>
                            <button class="nut-sl tang" data-id="${i}">+</button>
                        </div>
                    </div>
                    <button class="xoa" data-id="${i}">√ó</button>
                `;

                sp_gio.appendChild(gioItem);

                var nutTang = gioItem.querySelector('.tang');
                nutTang.addEventListener('click', tang_so_luong);

                var nutGiam = gioItem.querySelector('.giam');
                nutGiam.addEventListener('click', giam_so_luong);

                var nutXoa = gioItem.querySelector('.xoa');
                nutXoa.addEventListener('click', xoa); 
            }
            gioTotal.textContent = `T·ªïng: ${re_VND(total)}`;
        }

        function giam_so_luong(event) {
            let i = parseInt(event.target.dataset.id);
            if (gio[i].quantity > 1) {
                gio[i].quantity -= 1;
            } else {
                gio.splice(i, 1);
            }
            hien_thi_gio();
        }

        function tang_so_luong(event) {
            let i = parseInt(event.target.dataset.id);
            gio[i].quantity += 1;
            hien_thi_gio();
        }

        function xoa(event) {
            let i = parseInt(event.target.dataset.id);
            gio.splice(i, 1);
            hien_thi_gio();
        }

        function tat_bat_gio() {
            var giohang = document.getElementById('giohang');
            if (giohang.style.display === 'flex') {
                giohang.style.display = 'none';
            } else {
                giohang.style.display = 'flex';
            }
        }

        // chay js khi tai trang web
        document.addEventListener('DOMContentLoaded', function () {
            hien_san_pham(Data);           // khoi tao sp
            loc_sp();                      // khoi tao loc
            showSlides(slideIndex);        // khoi tao slides
            document.getElementById('mo-gio').addEventListener('click', tat_bat_gio); // khoi tao nut mo gio hang
            document.getElementById('dong-gio').addEventListener('click', tat_bat_gio); // khoi tao nut dong gio hang
        });
    </script>
</body>
</html>